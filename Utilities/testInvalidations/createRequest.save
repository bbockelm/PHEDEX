#!/usr/bin/env perl
##H
##H Usage:
##H   createRequest -db FILE[:SECTION]
##H
use strict;
use warnings;
use FindBin;
use lib "$FindBin::Bin/../../perl_lib";
use Getopt::Long;
use PHEDEX::Core::DB;
use PHEDEX::Core::Help;
use PHEDEX::RequestAllocator::Core;
use PHEDEX::Core::Timing;  # createRequest requires it
use Data::Dumper;

my $now = &mytimeofday();
print $now . "\n";
#die "EXITHERE\n";
my ($conn, $dbh, $db);

&GetOptions ("db=s"        => \$db,
	     "help|h"      => sub { &usage() });

# Require  db argument:
if (@ARGV || !$db)
{
#    die "DB parameter is missing. Use -h for help.\n";
} else {
    $conn =  { DBCONFIG => $db };
    $dbh = &connectToDatabase ($conn);
}

my $core = &PHEDEX::RequestAllocator::Core::
#my $core = { 
#   NOW  => $now,
#   TYPE => 'invalidate',
#};

my $rid = &PHEDEX::RequestAllocator::Core::createRequest($dbh);
